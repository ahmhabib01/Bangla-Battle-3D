<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bangla Battle 3D - Ultimate Bangladesh Edition</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
            color: white;
            overflow: hidden;
            height: 100vh;
        }
        
        #gameContainer {
            width: 100%;
            height: 100%;
            position: relative;
        }
        
        /* Main Menu Styles */
        #mainMenu {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 10;
            transition: opacity 0.5s;
        }
        
        .logo {
            font-size: 4rem;
            font-weight: bold;
            text-align: center;
            margin-bottom: 2rem;
            text-shadow: 0 0 10px #ff6b01, 0 0 20px #ff6b01;
            background: linear-gradient(to right, #ff6b01, #f9d423);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .subtitle {
            font-size: 1.2rem;
            margin-bottom: 3rem;
            text-align: center;
            color: #f9d423;
        }
        
        .menu-buttons {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            width: 300px;
        }
        
        .menu-btn {
            padding: 15px 30px;
            background: linear-gradient(135deg, #ff6b01, #f9d423);
            border: none;
            border-radius: 50px;
            color: #1a2a6c;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
            text-align: center;
        }
        
        .menu-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
        }
        
        .menu-btn.secondary {
            background: transparent;
            border: 2px solid #f9d423;
            color: #f9d423;
        }
        
        /* Character Selection */
        #characterSelection {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9;
        }
        
        .characters-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin: 2rem 0;
            max-width: 800px;
        }
        
        .character-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: transform 0.3s, background 0.3s;
        }
        
        .character-card:hover {
            transform: scale(1.05);
            background: rgba(255, 255, 255, 0.2);
        }
        
        .character-card.selected {
            background: rgba(255, 107, 1, 0.3);
            border: 2px solid #ff6b01;
        }
        
        .character-icon {
            font-size: 3rem;
            margin-bottom: 10px;
        }
        
        .character-name {
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .character-desc {
            font-size: 0.8rem;
            color: #ccc;
        }
        
        /* Game UI */
        #gameUI {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 5;
        }
        
        .hud {
            padding: 20px;
            display: flex;
            justify-content: space-between;
        }
        
        .health-bar {
            width: 200px;
            height: 20px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            overflow: hidden;
        }
        
        .health-fill {
            height: 100%;
            width: 100%;
            background: linear-gradient(to right, #ff6b01, #f9d423);
            transition: width 0.3s;
        }
        
        .coins {
            font-size: 1.5rem;
            font-weight: bold;
            color: #f9d423;
        }
        
        .mini-map {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 150px;
            height: 150px;
            background: rgba(0, 0, 0, 0.7);
            border-radius: 10px;
            border: 2px solid #f9d423;
        }
        
        .mission-info {
            position: absolute;
            bottom: 20px;
            left: 20px;
            background: rgba(0, 0, 0, 0.7);
            padding: 15px;
            border-radius: 10px;
            max-width: 300px;
        }
        
        .mission-title {
            font-weight: bold;
            color: #ff6b01;
            margin-bottom: 5px;
        }
        
        /* About Us Page */
        #aboutPage {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 11;
            text-align: center;
            padding: 20px;
        }
        
        .about-content {
            max-width: 600px;
        }
        
        .developer-photo {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            background: linear-gradient(135deg, #ff6b01, #f9d423);
            margin: 0 auto 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 3rem;
            cursor: pointer;
        }
        
        .back-btn {
            margin-top: 30px;
            padding: 10px 20px;
            background: transparent;
            border: 2px solid #f9d423;
            color: #f9d423;
            border-radius: 50px;
            cursor: pointer;
        }
        
        /* Game Canvas */
        #gameCanvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
    </style>
</head>
<body>
    <div id="gameContainer">
        <!-- Main Menu -->
        <div id="mainMenu">
            <div class="logo">Bangla Battle 3D</div>
            <div class="subtitle">Ultimate Bangladesh Edition</div>
            <div class="menu-buttons">
                <button class="menu-btn" id="playBtn">Play Game</button>
                <button class="menu-btn secondary" id="multiplayerBtn">Multiplayer</button>
                <button class="menu-btn secondary" id="profileBtn">Profile</button>
                <button class="menu-btn secondary" id="aboutBtn">About Us</button>
            </div>
        </div>
        
        <!-- Character Selection -->
        <div id="characterSelection">
            <h2>Select Your Character</h2>
            <div class="characters-grid">
                <div class="character-card" data-char="major">
                    <div class="character-icon">üíÇ</div>
                    <div class="character-name">Major Naim</div>
                    <div class="character-desc">Army commando with drone strike</div>
                </div>
                <div class="character-card" data-char="polash">
                    <div class="character-icon">üö§</div>
                    <div class="character-name">Polash</div>
                    <div class="character-desc">Boatman turned warrior</div>
                </div>
                <div class="character-card" data-char="rokeya">
                    <div class="character-icon">üìö</div>
                    <div class="character-name">Rokeya</div>
                    <div class="character-desc">Teacher with book blast attack</div>
                </div>
                <div class="character-card" data-char="bhombol">
                    <div class="character-icon">üöå</div>
                    <div class="character-name">Bhombol Mia</div>
                    <div class="character-desc">Bus driver with horn stun</div>
                </div>
                <div class="character-card" data-char="shorna">
                    <div class="character-icon">üì∏</div>
                    <div class="character-name">Shorna</div>
                    <div class="character-desc">Journalist with flashbang camera</div>
                </div>
                <div class="character-card" data-char="farid">
                    <div class="character-icon">üêü</div>
                    <div class="character-name">Farid Bhai</div>
                    <div class="character-desc">Fish market king with hilsha launcher</div>
                </div>
            </div>
            <button class="menu-btn" id="startGameBtn">Start Battle</button>
            <button class="back-btn" id="backToMenuBtn">Back to Menu</button>
        </div>
        
        <!-- About Us Page -->
        <div id="aboutPage">
            <div class="about-content">
                <div class="developer-photo" id="devPhoto">AH</div>
                <h2>AHM Habib</h2>
                <p>Game Developer - Made in Bangladesh</p>
                <p>Email: contact@banglabattle.com</p>
                <p>Website: www.banglabattle.com</p>
                <div style="margin: 20px 0;">
                    <h3>Credits</h3>
                    <p>Designer: Rahman Khan</p>
                    <p>Artist: Fatima Begum</p>
                    <p>Sound Engineer: Jamal Hossain</p>
                </div>
                <p>"This game is a tribute to our beautiful Bangladesh ‚Äî its people, its humor, and its spirit of unity."</p>
                <button class="back-btn" id="backFromAboutBtn">Back to Menu</button>
            </div>
        </div>
        
        <!-- Game UI -->
        <div id="gameUI">
            <div class="hud">
                <div class="health-bar">
                    <div class="health-fill" id="healthFill"></div>
                </div>
                <div class="coins" id="coinsDisplay">Coins: 1200</div>
            </div>
            <div class="mini-map"></div>
            <div class="mission-info">
                <div class="mission-title">Mission: Save the Rickshaw Puller</div>
                <div>Location: Motijheel, Dhaka</div>
                <div>Find the rickshaw puller and protect him from attackers</div>
            </div>
        </div>
        
        <!-- 3D Game Canvas -->
        <canvas id="gameCanvas"></canvas>
    </div>

    <script>
        // UI Navigation
        document.getElementById('playBtn').addEventListener('click', function() {
            document.getElementById('mainMenu').style.display = 'none';
            document.getElementById('characterSelection').style.display = 'flex';
        });
        
        document.getElementById('aboutBtn').addEventListener('click', function() {
            document.getElementById('mainMenu').style.display = 'none';
            document.getElementById('aboutPage').style.display = 'flex';
        });
        
        document.getElementById('backToMenuBtn').addEventListener('click', function() {
            document.getElementById('characterSelection').style.display = 'none';
            document.getElementById('mainMenu').style.display = 'flex';
        });
        
        document.getElementById('backFromAboutBtn').addEventListener('click', function() {
            document.getElementById('aboutPage').style.display = 'none';
            document.getElementById('mainMenu').style.display = 'flex';
        });
        
        document.getElementById('devPhoto').addEventListener('click', function() {
            window.open('https://facebook.com/banglabattle', '_blank');
        });
        
        // Character Selection
        let selectedCharacter = null;
        const characterCards = document.querySelectorAll('.character-card');
        
        characterCards.forEach(card => {
            card.addEventListener('click', function() {
                characterCards.forEach(c => c.classList.remove('selected'));
                this.classList.add('selected');
                selectedCharacter = this.getAttribute('data-char');
            });
        });
        
        document.getElementById('startGameBtn').addEventListener('click', function() {
            if (!selectedCharacter) {
                alert('Please select a character first!');
                return;
            }
            
            document.getElementById('characterSelection').style.display = 'none';
            startGame(selectedCharacter);
        });
        
        // Three.js Game Implementation
        function startGame(character) {
            // Set up Three.js scene
            const scene = new THREE.Scene();
            const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            const renderer = new THREE.WebGLRenderer({ canvas: document.getElementById('gameCanvas'), antialias: true });
            
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setClearColor(0x87CEEB); // Sky blue
            
            // Add lighting
            const ambientLight = new THREE.AmbientLight(0xffffff, 0.6);
            scene.add(ambientLight);
            
            const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
            directionalLight.position.set(10, 20, 5);
            scene.add(directionalLight);
            
            // Create ground
            const groundGeometry = new THREE.PlaneGeometry(50, 50);
            const groundMaterial = new THREE.MeshLambertMaterial({ color: 0x3a8c3a });
            const ground = new THREE.Mesh(groundGeometry, groundMaterial);
            ground.rotation.x = -Math.PI / 2;
            scene.add(ground);
            
            // Add some buildings (Dhaka city environment)
            const buildingGeometry = new THREE.BoxGeometry(4, 8, 4);
            const buildingMaterial = new THREE.MeshLambertMaterial({ color: 0xaaaaaa });
            
            for (let i = 0; i < 10; i++) {
                const building = new THREE.Mesh(buildingGeometry, buildingMaterial);
                building.position.x = (Math.random() - 0.5) * 40;
                building.position.z = (Math.random() - 0.5) * 40;
                building.position.y = 4;
                scene.add(building);
            }
            
            // Add a rickshaw (mission objective)
            const rickshawGeometry = new THREE.BoxGeometry(3, 1.5, 1.5);
            const rickshawMaterial = new THREE.MeshLambertMaterial({ color: 0xff0000 });
            const rickshaw = new THREE.Mesh(rickshawGeometry, rickshawMaterial);
            rickshaw.position.set(15, 0.75, 15);
            scene.add(rickshaw);
            
            // Create player based on selected character
            let playerGeometry, playerMaterial;
            
            switch(character) {
                case 'major':
                    playerGeometry = new THREE.BoxGeometry(1, 2, 1);
                    playerMaterial = new THREE.MeshLambertMaterial({ color: 0x006600 });
                    break;
                case 'polash':
                    playerGeometry = new THREE.BoxGeometry(1, 2, 1);
                    playerMaterial = new THREE.MeshLambertMaterial({ color: 0x0000ff });
                    break;
                case 'rokeya':
                    playerGeometry = new THREE.BoxGeometry(1, 2, 1);
                    playerMaterial = new THREE.MeshLambertMaterial({ color: 0xff00ff });
                    break;
                case 'bhombol':
                    playerGeometry = new THREE.BoxGeometry(1.2, 2, 1);
                    playerMaterial = new THREE.MeshLambertMaterial({ color: 0xffff00 });
                    break;
                case 'shorna':
                    playerGeometry = new THREE.BoxGeometry(1, 2, 1);
                    playerMaterial = new THREE.MeshLambertMaterial({ color: 0x00ffff });
                    break;
                case 'farid':
                    playerGeometry = new THREE.BoxGeometry(1.2, 2, 1.2);
                    playerMaterial = new THREE.MeshLambertMaterial({ color: 0xff6600 });
                    break;
            }
            
            const player = new THREE.Mesh(playerGeometry, playerMaterial);
            player.position.y = 1;
            scene.add(player);
            
            // Set up camera to follow player
            camera.position.set(0, 10, 10);
            camera.lookAt(player.position);
            
            // Add controls
            const controls = new THREE.OrbitControls(camera, renderer.domElement);
            controls.target = player.position;
            controls.update();
            
            // Game state
            let coins = 1200;
            let health = 100;
            const keys = {};
            
            // Handle keyboard input
            document.addEventListener('keydown', (event) => {
                keys[event.key] = true;
            });
            
            document.addEventListener('keyup', (event) => {
                keys[event.key] = false;
            });
            
            // Game loop
            function animate() {
                requestAnimationFrame(animate);
                
                // Player movement
                if (keys['w'] || keys['ArrowUp']) {
                    player.position.z -= 0.2;
                }
                if (keys['s'] || keys['ArrowDown']) {
                    player.position.z += 0.2;
                }
                if (keys['a'] || keys['ArrowLeft']) {
                    player.position.x -= 0.2;
                }
                if (keys['d'] || keys['ArrowRight']) {
                    player.position.x += 0.2;
                }
                
                // Keep player on ground
                player.position.y = 1;
                
                // Check if player reached the rickshaw
                const distanceToRickshaw = player.position.distanceTo(rickshaw.position);
                if (distanceToRickshaw < 3) {
                    document.querySelector('.mission-title').textContent = "Mission Complete!";
                    document.querySelector('.mission-info div:nth-child(3)').textContent = "Return to base for next mission";
                    coins += 100;
                    document.getElementById('coinsDisplay').textContent = `Coins: ${coins}`;
                }
                
                // Update camera position to follow player
                camera.position.x = player.position.x;
                camera.position.z = player.position.z + 10;
                controls.target = player.position;
                controls.update();
                
                renderer.render(scene, camera);
            }
            
            animate();
            
            // Handle window resize
            window.addEventListener('resize', () => {
                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(window.innerWidth, window.innerHeight);
            });
        }
    </script>
</body>
</html>
